import { PrismaClient, Permission } from '@prisma/client';

const prisma = new PrismaClient();

// Define role-based permission sets based on the actual Permission enum
const rolePermissions: Record<string, Permission[]> = {
  OWNER: [
    Permission.CREATE_POST,
    Permission.EDIT_SELF_POST,
    Permission.EDIT_ANY_POST,
    Permission.DELETE_SELF_POST,
    Permission.DELETE_ANY_POST,
    Permission.COMMENT_ON_POST,
    Permission.EDIT_SELF_COMMENT,
    Permission.EDIT_ANY_COMMENT,
    Permission.DELETE_SELF_COMMENT,
    Permission.DELETE_ANY_COMMENT,
    Permission.REACT_TO_POST,
    Permission.REACT_TO_COMMENT,
    Permission.MENTION_USERS,
    Permission.VIEW_POSTS,
    Permission.BOOKMARK_POST,
    Permission.CREATE_TASK,
    Permission.EDIT_SELF_TASK,
    Permission.EDIT_ANY_TASK,
    Permission.DELETE_SELF_TASK,
    Permission.DELETE_ANY_TASK,
    Permission.ASSIGN_TASK,
    Permission.VIEW_TASKS,
    Permission.CHANGE_TASK_STATUS,
    Permission.CREATE_BOARD,
    Permission.EDIT_BOARD,
    Permission.DELETE_BOARD,
    Permission.MANAGE_BOARD_SETTINGS,
    Permission.VIEW_BOARDS,
    Permission.MANAGE_WORKSPACE_SETTINGS,
    Permission.MANAGE_WORKSPACE_MEMBERS,
    Permission.MANAGE_WORKSPACE_PERMISSIONS,
    Permission.VIEW_WORKSPACE_ANALYTICS,
    Permission.INVITE_MEMBERS,
    Permission.REMOVE_MEMBERS,
    Permission.CHANGE_MEMBER_ROLES,
    Permission.VIEW_MEMBER_LIST,
    Permission.MANAGE_INTEGRATIONS,
    Permission.EXPORT_DATA,
    Permission.IMPORT_DATA,
    Permission.VIEW_AUDIT_LOGS,
    Permission.CREATE_FEATURE_REQUEST,
    Permission.EDIT_SELF_FEATURE_REQUEST,
    Permission.EDIT_ANY_FEATURE_REQUEST,
    Permission.DELETE_SELF_FEATURE_REQUEST,
    Permission.DELETE_ANY_FEATURE_REQUEST,
    Permission.VOTE_ON_FEATURE,
    Permission.COMMENT_ON_FEATURE,
    Permission.VIEW_FEATURES,
    Permission.CREATE_EPIC,
    Permission.EDIT_SELF_EPIC,
    Permission.EDIT_ANY_EPIC,
    Permission.DELETE_SELF_EPIC,
    Permission.DELETE_ANY_EPIC,
    Permission.VIEW_EPICS,
    Permission.CREATE_STORY,
    Permission.EDIT_SELF_STORY,
    Permission.EDIT_ANY_STORY,
    Permission.DELETE_SELF_STORY,
    Permission.DELETE_ANY_STORY,
    Permission.VIEW_STORIES,
    Permission.CREATE_MILESTONE,
    Permission.EDIT_SELF_MILESTONE,
    Permission.EDIT_ANY_MILESTONE,
    Permission.DELETE_SELF_MILESTONE,
    Permission.DELETE_ANY_MILESTONE,
    Permission.VIEW_MILESTONES,
    Permission.CREATE_NOTE,
    Permission.EDIT_SELF_NOTE,
    Permission.EDIT_ANY_NOTE,
    Permission.DELETE_SELF_NOTE,
    Permission.DELETE_ANY_NOTE,
    Permission.VIEW_NOTES,
    Permission.SEND_MESSAGE,
    Permission.VIEW_MESSAGES,
    Permission.DELETE_SELF_MESSAGE,
    Permission.DELETE_ANY_MESSAGE,
    Permission.COMMENT_ON_TASK,
    Permission.MANAGE_NOTIFICATIONS,
    Permission.VIEW_REPORTS,
    Permission.PIN_POST,
    Permission.RESOLVE_BLOCKER,
  ],
  ADMIN: [
    Permission.CREATE_POST,
    Permission.EDIT_SELF_POST,
    Permission.EDIT_ANY_POST,
    Permission.DELETE_SELF_POST,
    Permission.DELETE_ANY_POST,
    Permission.COMMENT_ON_POST,
    Permission.EDIT_SELF_COMMENT,
    Permission.EDIT_ANY_COMMENT,
    Permission.DELETE_SELF_COMMENT,
    Permission.DELETE_ANY_COMMENT,
    Permission.REACT_TO_POST,
    Permission.REACT_TO_COMMENT,
    Permission.MENTION_USERS,
    Permission.VIEW_POSTS,
    Permission.BOOKMARK_POST,
    Permission.CREATE_TASK,
    Permission.EDIT_SELF_TASK,
    Permission.EDIT_ANY_TASK,
    Permission.DELETE_SELF_TASK,
    Permission.DELETE_ANY_TASK,
    Permission.ASSIGN_TASK,
    Permission.VIEW_TASKS,
    Permission.CHANGE_TASK_STATUS,
    Permission.CREATE_BOARD,
    Permission.EDIT_BOARD,
    Permission.DELETE_BOARD,
    Permission.MANAGE_BOARD_SETTINGS,
    Permission.VIEW_BOARDS,
    Permission.MANAGE_WORKSPACE_MEMBERS,
    Permission.MANAGE_WORKSPACE_PERMISSIONS,
    Permission.VIEW_WORKSPACE_ANALYTICS,
    Permission.INVITE_MEMBERS,
    Permission.REMOVE_MEMBERS,
    Permission.CHANGE_MEMBER_ROLES,
    Permission.VIEW_MEMBER_LIST,
    Permission.MANAGE_INTEGRATIONS,
    Permission.EXPORT_DATA,
    Permission.VIEW_AUDIT_LOGS,
    Permission.CREATE_FEATURE_REQUEST,
    Permission.EDIT_SELF_FEATURE_REQUEST,
    Permission.EDIT_ANY_FEATURE_REQUEST,
    Permission.DELETE_SELF_FEATURE_REQUEST,
    Permission.DELETE_ANY_FEATURE_REQUEST,
    Permission.VOTE_ON_FEATURE,
    Permission.COMMENT_ON_FEATURE,
    Permission.VIEW_FEATURES,
    Permission.CREATE_EPIC,
    Permission.EDIT_SELF_EPIC,
    Permission.EDIT_ANY_EPIC,
    Permission.DELETE_SELF_EPIC,
    Permission.DELETE_ANY_EPIC,
    Permission.VIEW_EPICS,
    Permission.CREATE_STORY,
    Permission.EDIT_SELF_STORY,
    Permission.EDIT_ANY_STORY,
    Permission.DELETE_SELF_STORY,
    Permission.DELETE_ANY_STORY,
    Permission.VIEW_STORIES,
    Permission.CREATE_MILESTONE,
    Permission.EDIT_SELF_MILESTONE,
    Permission.EDIT_ANY_MILESTONE,
    Permission.DELETE_SELF_MILESTONE,
    Permission.DELETE_ANY_MILESTONE,
    Permission.VIEW_MILESTONES,
    Permission.CREATE_NOTE,
    Permission.EDIT_SELF_NOTE,
    Permission.EDIT_ANY_NOTE,
    Permission.DELETE_SELF_NOTE,
    Permission.DELETE_ANY_NOTE,
    Permission.VIEW_NOTES,
    Permission.SEND_MESSAGE,
    Permission.VIEW_MESSAGES,
    Permission.DELETE_SELF_MESSAGE,
    Permission.COMMENT_ON_TASK,
    Permission.MANAGE_NOTIFICATIONS,
    Permission.VIEW_REPORTS,
    Permission.PIN_POST,
    Permission.RESOLVE_BLOCKER,
  ],
  MODERATOR: [
    Permission.CREATE_POST,
    Permission.EDIT_SELF_POST,
    Permission.DELETE_SELF_POST,
    Permission.COMMENT_ON_POST,
    Permission.EDIT_SELF_COMMENT,
    Permission.DELETE_SELF_COMMENT,
    Permission.REACT_TO_POST,
    Permission.REACT_TO_COMMENT,
    Permission.MENTION_USERS,
    Permission.VIEW_POSTS,
    Permission.BOOKMARK_POST,
    Permission.CREATE_TASK,
    Permission.EDIT_SELF_TASK,
    Permission.EDIT_ANY_TASK,
    Permission.DELETE_SELF_TASK,
    Permission.ASSIGN_TASK,
    Permission.VIEW_TASKS,
    Permission.CHANGE_TASK_STATUS,
    Permission.CREATE_BOARD,
    Permission.EDIT_BOARD,
    Permission.MANAGE_BOARD_SETTINGS,
    Permission.VIEW_BOARDS,
    Permission.VIEW_WORKSPACE_ANALYTICS,
    Permission.VIEW_MEMBER_LIST,
    Permission.CREATE_FEATURE_REQUEST,
    Permission.EDIT_SELF_FEATURE_REQUEST,
    Permission.VOTE_ON_FEATURE,
    Permission.COMMENT_ON_FEATURE,
    Permission.VIEW_FEATURES,
    Permission.CREATE_EPIC,
    Permission.EDIT_SELF_EPIC,
    Permission.EDIT_ANY_EPIC,
    Permission.DELETE_SELF_EPIC,
    Permission.VIEW_EPICS,
    Permission.CREATE_STORY,
    Permission.EDIT_SELF_STORY,
    Permission.EDIT_ANY_STORY,
    Permission.DELETE_SELF_STORY,
    Permission.VIEW_STORIES,
    Permission.CREATE_MILESTONE,
    Permission.EDIT_SELF_MILESTONE,
    Permission.EDIT_ANY_MILESTONE,
    Permission.DELETE_SELF_MILESTONE,
    Permission.VIEW_MILESTONES,
    Permission.CREATE_NOTE,
    Permission.EDIT_SELF_NOTE,
    Permission.DELETE_SELF_NOTE,
    Permission.VIEW_NOTES,
    Permission.SEND_MESSAGE,
    Permission.VIEW_MESSAGES,
    Permission.DELETE_SELF_MESSAGE,
    Permission.COMMENT_ON_TASK,
    Permission.VIEW_REPORTS,
    Permission.RESOLVE_BLOCKER,
  ],
  DEVELOPER: [
    Permission.CREATE_POST,
    Permission.EDIT_SELF_POST,
    Permission.DELETE_SELF_POST,
    Permission.COMMENT_ON_POST,
    Permission.EDIT_SELF_COMMENT,
    Permission.DELETE_SELF_COMMENT,
    Permission.REACT_TO_POST,
    Permission.REACT_TO_COMMENT,
    Permission.MENTION_USERS,
    Permission.VIEW_POSTS,
    Permission.BOOKMARK_POST,
    Permission.CREATE_TASK,
    Permission.EDIT_SELF_TASK,
    Permission.DELETE_SELF_TASK,
    Permission.ASSIGN_TASK,
    Permission.VIEW_TASKS,
    Permission.CHANGE_TASK_STATUS,
    Permission.VIEW_BOARDS,
    Permission.VIEW_MEMBER_LIST,
    Permission.CREATE_FEATURE_REQUEST,
    Permission.EDIT_SELF_FEATURE_REQUEST,
    Permission.VOTE_ON_FEATURE,
    Permission.COMMENT_ON_FEATURE,
    Permission.VIEW_FEATURES,
    Permission.CREATE_EPIC,
    Permission.EDIT_SELF_EPIC,
    Permission.DELETE_SELF_EPIC,
    Permission.VIEW_EPICS,
    Permission.CREATE_STORY,
    Permission.EDIT_SELF_STORY,
    Permission.DELETE_SELF_STORY,
    Permission.VIEW_STORIES,
    Permission.CREATE_MILESTONE,
    Permission.EDIT_SELF_MILESTONE,
    Permission.DELETE_SELF_MILESTONE,
    Permission.VIEW_MILESTONES,
    Permission.CREATE_NOTE,
    Permission.EDIT_SELF_NOTE,
    Permission.DELETE_SELF_NOTE,
    Permission.VIEW_NOTES,
    Permission.SEND_MESSAGE,
    Permission.VIEW_MESSAGES,
    Permission.DELETE_SELF_MESSAGE,
    Permission.COMMENT_ON_TASK,
  ],
  PROJECT_MANAGER: [
    Permission.CREATE_POST,
    Permission.EDIT_SELF_POST,
    Permission.DELETE_SELF_POST,
    Permission.COMMENT_ON_POST,
    Permission.EDIT_SELF_COMMENT,
    Permission.DELETE_SELF_COMMENT,
    Permission.REACT_TO_POST,
    Permission.REACT_TO_COMMENT,
    Permission.MENTION_USERS,
    Permission.VIEW_POSTS,
    Permission.BOOKMARK_POST,
    Permission.CREATE_TASK,
    Permission.EDIT_SELF_TASK,
    Permission.EDIT_ANY_TASK,
    Permission.DELETE_SELF_TASK,
    Permission.ASSIGN_TASK,
    Permission.VIEW_TASKS,
    Permission.CHANGE_TASK_STATUS,
    Permission.CREATE_BOARD,
    Permission.EDIT_BOARD,
    Permission.VIEW_BOARDS,
    Permission.VIEW_WORKSPACE_ANALYTICS,
    Permission.VIEW_MEMBER_LIST,
    Permission.CREATE_FEATURE_REQUEST,
    Permission.EDIT_SELF_FEATURE_REQUEST,
    Permission.VOTE_ON_FEATURE,
    Permission.COMMENT_ON_FEATURE,
    Permission.VIEW_FEATURES,
    Permission.CREATE_EPIC,
    Permission.EDIT_SELF_EPIC,
    Permission.EDIT_ANY_EPIC,
    Permission.DELETE_SELF_EPIC,
    Permission.VIEW_EPICS,
    Permission.CREATE_STORY,
    Permission.EDIT_SELF_STORY,
    Permission.EDIT_ANY_STORY,
    Permission.DELETE_SELF_STORY,
    Permission.VIEW_STORIES,
    Permission.CREATE_MILESTONE,
    Permission.EDIT_SELF_MILESTONE,
    Permission.EDIT_ANY_MILESTONE,
    Permission.DELETE_SELF_MILESTONE,
    Permission.VIEW_MILESTONES,
    Permission.CREATE_NOTE,
    Permission.EDIT_SELF_NOTE,
    Permission.DELETE_SELF_NOTE,
    Permission.VIEW_NOTES,
    Permission.SEND_MESSAGE,
    Permission.VIEW_MESSAGES,
    Permission.DELETE_SELF_MESSAGE,
    Permission.COMMENT_ON_TASK,
    Permission.VIEW_REPORTS,
    Permission.PIN_POST,
    Permission.RESOLVE_BLOCKER,
  ],
  DESIGNER: [
    Permission.CREATE_POST,
    Permission.EDIT_SELF_POST,
    Permission.DELETE_SELF_POST,
    Permission.COMMENT_ON_POST,
    Permission.EDIT_SELF_COMMENT,
    Permission.DELETE_SELF_COMMENT,
    Permission.REACT_TO_POST,
    Permission.REACT_TO_COMMENT,
    Permission.MENTION_USERS,
    Permission.VIEW_POSTS,
    Permission.BOOKMARK_POST,
    Permission.CREATE_TASK,
    Permission.EDIT_SELF_TASK,
    Permission.DELETE_SELF_TASK,
    Permission.VIEW_TASKS,
    Permission.CHANGE_TASK_STATUS,
    Permission.VIEW_BOARDS,
    Permission.VIEW_MEMBER_LIST,
    Permission.CREATE_FEATURE_REQUEST,
    Permission.EDIT_SELF_FEATURE_REQUEST,
    Permission.VOTE_ON_FEATURE,
    Permission.COMMENT_ON_FEATURE,
    Permission.VIEW_FEATURES,
    Permission.CREATE_STORY,
    Permission.EDIT_SELF_STORY,
    Permission.DELETE_SELF_STORY,
    Permission.VIEW_STORIES,
    Permission.CREATE_NOTE,
    Permission.EDIT_SELF_NOTE,
    Permission.DELETE_SELF_NOTE,
    Permission.VIEW_NOTES,
    Permission.SEND_MESSAGE,
    Permission.VIEW_MESSAGES,
    Permission.DELETE_SELF_MESSAGE,
    Permission.COMMENT_ON_TASK,
  ],
  QA_TESTER: [
    Permission.CREATE_POST,
    Permission.EDIT_SELF_POST,
    Permission.DELETE_SELF_POST,
    Permission.COMMENT_ON_POST,
    Permission.EDIT_SELF_COMMENT,
    Permission.DELETE_SELF_COMMENT,
    Permission.REACT_TO_POST,
    Permission.REACT_TO_COMMENT,
    Permission.MENTION_USERS,
    Permission.VIEW_POSTS,
    Permission.BOOKMARK_POST,
    Permission.CREATE_TASK,
    Permission.EDIT_SELF_TASK,
    Permission.DELETE_SELF_TASK,
    Permission.VIEW_TASKS,
    Permission.CHANGE_TASK_STATUS,
    Permission.VIEW_BOARDS,
    Permission.VIEW_MEMBER_LIST,
    Permission.CREATE_FEATURE_REQUEST,
    Permission.EDIT_SELF_FEATURE_REQUEST,
    Permission.VOTE_ON_FEATURE,
    Permission.COMMENT_ON_FEATURE,
    Permission.VIEW_FEATURES,
    Permission.CREATE_NOTE,
    Permission.EDIT_SELF_NOTE,
    Permission.DELETE_SELF_NOTE,
    Permission.VIEW_NOTES,
    Permission.SEND_MESSAGE,
    Permission.VIEW_MESSAGES,
    Permission.DELETE_SELF_MESSAGE,
    Permission.COMMENT_ON_TASK,
  ],
  CONTENT_CREATOR: [
    Permission.CREATE_POST,
    Permission.EDIT_SELF_POST,
    Permission.DELETE_SELF_POST,
    Permission.COMMENT_ON_POST,
    Permission.EDIT_SELF_COMMENT,
    Permission.DELETE_SELF_COMMENT,
    Permission.REACT_TO_POST,
    Permission.REACT_TO_COMMENT,
    Permission.MENTION_USERS,
    Permission.VIEW_POSTS,
    Permission.BOOKMARK_POST,
    Permission.VIEW_TASKS,
    Permission.VIEW_BOARDS,
    Permission.VIEW_MEMBER_LIST,
    Permission.CREATE_FEATURE_REQUEST,
    Permission.VOTE_ON_FEATURE,
    Permission.COMMENT_ON_FEATURE,
    Permission.VIEW_FEATURES,
    Permission.CREATE_NOTE,
    Permission.EDIT_SELF_NOTE,
    Permission.DELETE_SELF_NOTE,
    Permission.VIEW_NOTES,
    Permission.SEND_MESSAGE,
    Permission.VIEW_MESSAGES,
    Permission.DELETE_SELF_MESSAGE,
  ],
  ANALYST: [
    Permission.CREATE_POST,
    Permission.EDIT_SELF_POST,
    Permission.DELETE_SELF_POST,
    Permission.COMMENT_ON_POST,
    Permission.EDIT_SELF_COMMENT,
    Permission.DELETE_SELF_COMMENT,
    Permission.REACT_TO_POST,
    Permission.REACT_TO_COMMENT,
    Permission.MENTION_USERS,
    Permission.VIEW_POSTS,
    Permission.BOOKMARK_POST,
    Permission.VIEW_TASKS,
    Permission.VIEW_BOARDS,
    Permission.VIEW_WORKSPACE_ANALYTICS,
    Permission.VIEW_MEMBER_LIST,
    Permission.CREATE_FEATURE_REQUEST,
    Permission.EDIT_SELF_FEATURE_REQUEST,
    Permission.VOTE_ON_FEATURE,
    Permission.COMMENT_ON_FEATURE,
    Permission.VIEW_FEATURES,
    Permission.CREATE_NOTE,
    Permission.EDIT_SELF_NOTE,
    Permission.DELETE_SELF_NOTE,
    Permission.VIEW_NOTES,
    Permission.SEND_MESSAGE,
    Permission.VIEW_MESSAGES,
    Permission.DELETE_SELF_MESSAGE,
    Permission.VIEW_REPORTS,
  ],
  HR: [
    Permission.CREATE_POST,
    Permission.EDIT_SELF_POST,
    Permission.DELETE_SELF_POST,
    Permission.COMMENT_ON_POST,
    Permission.EDIT_SELF_COMMENT,
    Permission.DELETE_SELF_COMMENT,
    Permission.REACT_TO_POST,
    Permission.REACT_TO_COMMENT,
    Permission.MENTION_USERS,
    Permission.VIEW_POSTS,
    Permission.BOOKMARK_POST,
    Permission.VIEW_TASKS,
    Permission.VIEW_BOARDS,
    Permission.VIEW_WORKSPACE_ANALYTICS,
    Permission.VIEW_MEMBER_LIST,
    Permission.INVITE_MEMBERS,
    Permission.CHANGE_MEMBER_ROLES,
    Permission.CREATE_FEATURE_REQUEST,
    Permission.EDIT_SELF_FEATURE_REQUEST,
    Permission.VOTE_ON_FEATURE,
    Permission.COMMENT_ON_FEATURE,
    Permission.VIEW_FEATURES,
    Permission.CREATE_NOTE,
    Permission.EDIT_SELF_NOTE,
    Permission.DELETE_SELF_NOTE,
    Permission.VIEW_NOTES,
    Permission.SEND_MESSAGE,
    Permission.VIEW_MESSAGES,
    Permission.DELETE_SELF_MESSAGE,
    Permission.MANAGE_NOTIFICATIONS,
    Permission.VIEW_REPORTS,
    Permission.PIN_POST,
  ],
  MARKETING: [
    Permission.CREATE_POST,
    Permission.EDIT_SELF_POST,
    Permission.DELETE_SELF_POST,
    Permission.COMMENT_ON_POST,
    Permission.EDIT_SELF_COMMENT,
    Permission.DELETE_SELF_COMMENT,
    Permission.REACT_TO_POST,
    Permission.REACT_TO_COMMENT,
    Permission.MENTION_USERS,
    Permission.VIEW_POSTS,
    Permission.BOOKMARK_POST,
    Permission.VIEW_TASKS,
    Permission.VIEW_BOARDS,
    Permission.VIEW_MEMBER_LIST,
    Permission.CREATE_FEATURE_REQUEST,
    Permission.VOTE_ON_FEATURE,
    Permission.COMMENT_ON_FEATURE,
    Permission.VIEW_FEATURES,
    Permission.CREATE_NOTE,
    Permission.EDIT_SELF_NOTE,
    Permission.DELETE_SELF_NOTE,
    Permission.VIEW_NOTES,
    Permission.SEND_MESSAGE,
    Permission.VIEW_MESSAGES,
    Permission.DELETE_SELF_MESSAGE,
  ],
  SALES: [
    Permission.CREATE_POST,
    Permission.EDIT_SELF_POST,
    Permission.DELETE_SELF_POST,
    Permission.COMMENT_ON_POST,
    Permission.EDIT_SELF_COMMENT,
    Permission.DELETE_SELF_COMMENT,
    Permission.REACT_TO_POST,
    Permission.REACT_TO_COMMENT,
    Permission.MENTION_USERS,
    Permission.VIEW_POSTS,
    Permission.BOOKMARK_POST,
    Permission.VIEW_TASKS,
    Permission.VIEW_BOARDS,
    Permission.VIEW_MEMBER_LIST,
    Permission.CREATE_FEATURE_REQUEST,
    Permission.VOTE_ON_FEATURE,
    Permission.COMMENT_ON_FEATURE,
    Permission.VIEW_FEATURES,
    Permission.CREATE_NOTE,
    Permission.EDIT_SELF_NOTE,
    Permission.DELETE_SELF_NOTE,
    Permission.VIEW_NOTES,
    Permission.SEND_MESSAGE,
    Permission.VIEW_MESSAGES,
    Permission.DELETE_SELF_MESSAGE,
  ],
  CUSTOMER_SUPPORT: [
    Permission.CREATE_POST,
    Permission.EDIT_SELF_POST,
    Permission.DELETE_SELF_POST,
    Permission.COMMENT_ON_POST,
    Permission.EDIT_SELF_COMMENT,
    Permission.DELETE_SELF_COMMENT,
    Permission.REACT_TO_POST,
    Permission.REACT_TO_COMMENT,
    Permission.MENTION_USERS,
    Permission.VIEW_POSTS,
    Permission.BOOKMARK_POST,
    Permission.VIEW_TASKS,
    Permission.VIEW_BOARDS,
    Permission.VIEW_MEMBER_LIST,
    Permission.CREATE_FEATURE_REQUEST,
    Permission.VOTE_ON_FEATURE,
    Permission.COMMENT_ON_FEATURE,
    Permission.VIEW_FEATURES,
    Permission.CREATE_NOTE,
    Permission.EDIT_SELF_NOTE,
    Permission.DELETE_SELF_NOTE,
    Permission.VIEW_NOTES,
    Permission.SEND_MESSAGE,
    Permission.VIEW_MESSAGES,
    Permission.DELETE_SELF_MESSAGE,
  ],
  MEMBER: [
    Permission.CREATE_POST,
    Permission.EDIT_SELF_POST,
    Permission.DELETE_SELF_POST,
    Permission.COMMENT_ON_POST,
    Permission.EDIT_SELF_COMMENT,
    Permission.DELETE_SELF_COMMENT,
    Permission.REACT_TO_POST,
    Permission.REACT_TO_COMMENT,
    Permission.MENTION_USERS,
    Permission.VIEW_POSTS,
    Permission.BOOKMARK_POST,
    Permission.CREATE_TASK,
    Permission.EDIT_SELF_TASK,
    Permission.DELETE_SELF_TASK,
    Permission.VIEW_TASKS,
    Permission.CHANGE_TASK_STATUS,
    Permission.VIEW_BOARDS,
    Permission.VIEW_MEMBER_LIST,
    Permission.CREATE_FEATURE_REQUEST,
    Permission.EDIT_SELF_FEATURE_REQUEST,
    Permission.VOTE_ON_FEATURE,
    Permission.COMMENT_ON_FEATURE,
    Permission.VIEW_FEATURES,
    Permission.CREATE_NOTE,
    Permission.EDIT_SELF_NOTE,
    Permission.DELETE_SELF_NOTE,
    Permission.VIEW_NOTES,
    Permission.SEND_MESSAGE,
    Permission.VIEW_MESSAGES,
    Permission.DELETE_SELF_MESSAGE,
    Permission.COMMENT_ON_TASK,
  ],
  VIEWER: [
    Permission.VIEW_POSTS,
    Permission.REACT_TO_POST,
    Permission.REACT_TO_COMMENT,
    Permission.BOOKMARK_POST,
    Permission.VIEW_TASKS,
    Permission.VIEW_BOARDS,
    Permission.VIEW_MEMBER_LIST,
    Permission.VOTE_ON_FEATURE,
    Permission.VIEW_FEATURES,
    Permission.VIEW_NOTES,
    Permission.SEND_MESSAGE,
    Permission.VIEW_MESSAGES,
  ],
  GUEST: [
    Permission.VIEW_POSTS,
    Permission.VIEW_TASKS,
    Permission.VIEW_BOARDS,
    Permission.VIEW_MEMBER_LIST,
    Permission.VOTE_ON_FEATURE,
    Permission.VIEW_FEATURES,
  ],
};

export async function seedDefaultPermissions() {
  try {
    console.log('Starting to seed default permissions...');

    // Get all workspaces
    const workspaces = await prisma.workspace.findMany();
    
    if (workspaces.length === 0) {
      console.log('No workspaces found. Skipping permission seeding.');
      return;
    }

    console.log(`Found ${workspaces.length} workspace(s). Seeding permissions...`);

    for (const workspace of workspaces) {
      console.log(`Processing workspace: ${workspace.name} (${workspace.id})`);

      // Clear existing permissions for this workspace
      await prisma.rolePermission.deleteMany({
        where: { workspaceId: workspace.id }
      });

      // Seed permissions for each role
      for (const [role, permissions] of Object.entries(rolePermissions)) {
        console.log(`  Seeding ${permissions.length} permissions for role: ${role}`);
        
        const permissionData = permissions.map(permission => ({
          workspaceId: workspace.id,
          role: role,
          permission,
        }));

        await prisma.rolePermission.createMany({
          data: permissionData,
          skipDuplicates: true,
        });
      }
    }

    console.log('Successfully seeded default permissions for all workspaces!');
  } catch (error) {
    console.error('Error seeding default permissions:', error);
    throw error;
  } finally {
    await prisma.$disconnect();
  }
}

seedDefaultPermissions(); 
